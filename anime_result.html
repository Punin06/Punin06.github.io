<!Doctype html>
<html>
<head>
<title>Top Anime for the Season! </title>
</head>
 
<body onload = "season()">
{% for index in trim %}
<a href = "#"><span onclick = "sort('{{index|string}}')" > {{index}} </span> </a>
{% endfor %}
<br>
<span>
<form action = "/" method = "POST">
<input type ="submit" id = "btn1" value = ""  name ="btn1">  
<input type="submit" id = "btn2" value = "" name = "btn2"> 
<input type="submit" id = "btn3" value = "" name = "btn3" > 
 </form> </span>
{% for index in range(names|length) %}
<p> Rank: {{((index)|int)+1}} </p>
<a href="{{links[index]|safe}}"><p> Name: {{ names[index]|safe }} </p> </a>
<p>Genre: </p>
 
	{% for genres in genre[index] %}
	<a href = "#"><span onclick = "sort('{{genres|string}}')">	{{genres|safe}} </span></a>
	{% endfor %}

<p> Date: {{date[index]|safe}} </p>
<p> Score: {{score[index]|safe}} </p>
<img src = "{{images[index]|safe}} "></img>
<br>
{% endfor %}

<script>
function sort(pa)
{
	var name = {{names|tojson}};
	var genre = {{genre|tojson}};
	var imglink = {{images|tojson}};
	var scores = {{score|tojson}};
	var sort = [];
	var img = [];
	var score = [];
	var genres = [];
	for (x =0; x<genre.length;x++)
	{
		for (i of genre[x])
		{ 
			if(pa == i)
			{
				console.log(name[x]);
				sort.push(name[x]);
				img.push(imglink[x]);
				score.push(scores[x]);
				genres.push(genre[x]);
			}
		}
	}
	sessionStorage.setItem("jsArray", JSON.stringify(sort));
	sessionStorage.setItem("jsImage", JSON.stringify(img));
	sessionStorage.setItem("jsScore", JSON.stringify(score));
	sessionStorage.setItem("jsGenre", JSON.stringify(genres));
	location.assign("anime");

	}

	function season()
	{ 
	 var szn = {{szn|tojson}};
	 console.log(szn);
	 
	 console.log(szn[0].toLowerCase() == "winter");
		if (szn[0].toLowerCase() == "winter")
		{
		document.getElementById("btn1").value = "spring" + " " + szn[1];
		document.getElementById("btn1").innerHTML =  "spring" + " " + szn[1];
		document.getElementById("btn2").value = "summer" + " " + szn[1];
		document.getElementById("btn2").innerHTML =  "summer" + " " + szn[1];
		document.getElementById("btn3").value = "fall" + " " + szn[1];
		document.getElementById("btn3").innerHTML =  "fall" + " " + szn[1];
	    }

	    else if (szn[0].toLowerCase() == "spring")
		{
		document.getElementById("btn1").value = "winter" + " " + szn[1];
		document.getElementById("btn1").innerHTML =  "winter" + " " + szn[1];
		document.getElementById("btn2").value = "summer"+ " " + szn[1];
		document.getElementById("btn2").innerHTML =  "summer"+ " " + szn[1];
		document.getElementById("btn3").value = "fall" + " " + szn[1];
		document.getElementById("btn3").innerHTML =  "fall" + " " + szn[1];
	    }

	    else if (szn[0].toLowerCase() == "summer")
		{
		document.getElementById("btn1").value = "winter" + " " + szn[1];
		document.getElementById("btn1").innerHTML =  "winter" + " " + szn[1];
		document.getElementById("btn2").value = "spring" + " " + szn[1];
		document.getElementById("btn2").innerHTML =  "spring" + " " + szn[1];
		document.getElementById("btn3").value = "fall" + " " + szn[1];
		document.getElementById("btn3").innerHTML =  "fall" + " " + szn[1];
	    }

	    else
	    {
	    document.getElementById("btn1").value = "winter" + " " + szn[1];
		document.getElementById("btn1").innerHTML =  "winter" + " " + szn[1];
		document.getElementById("btn2").value = "spring" + " " + szn[1];
		document.getElementById("btn2").innerHTML =  "spring" + " " + szn[1];
		document.getElementById("btn3").value = "summer" + " " + szn[1];
		document.getElementById("btn3").innerHTML =  "summer" + " " + szn[1];
	    }

	}
</script>

</body>
</html>